"""
模拟用户 Profile — 碎片化的真实生活数据

设计原则：
  - 不为匹配而设计。Profile 是用户过去的生活痕迹，不是当下需求的描述。
  - 包含大量无关信息：吃了什么、天气、闲聊、情绪。
  - 相关信息是间接的：不会直接说"我需要 X"，而是留下了做过 X 相关事情的痕迹。
  - 碎片长度差异极大：有时一个字，有时一大段小作文。
  - 每个 Profile 模拟一段时间内 adapter（SecondMe/社交数据）收集的真实碎片。

每条 Profile 对应一条 L4 或 L3 测试查询。
Profile 和查询之间的关联是隐含的——需要 LLM 推断才能建立。
"""

FORMULATION_TESTS = [
    # ================================================================
    # L4 查询 — 最难的模糊意图
    # ================================================================
    {
        "query": "想做一个把声音变成画面的东西",
        "level": "L4",
        "expected_hits": [
            "glitch_girl", "glitch_queen", "wu_sheng_de_ren",
            "liu_guang_ke", "glitch_monk", "echo_chamber",
        ],
        "min_hits": 2,
        "profile_fragments": [
            "今天在B站看了个视频，有个人用 Processing 做了个音乐可视化，像水母一样的光影跟着节拍动。评论区有人说这叫生成艺术。收藏了。",
            "上周末去了个电子音乐节。",
            "有个VJ现场，屏幕上的画面好像能跟着低音炮的震动变化。问了旁边的人说是用 TouchDesigner 做的。回来搜了一下，下载了但打开一脸懵。界面全是节点连线，像电路图一样。看了两个教程就放弃了。但那个现场效果真的太震撼了——整个空间的光影像是活的，跟着鼓点呼吸。我站在音箱旁边，觉得自己也在被声波雕塑。不知道什么时候我也能做出这种东西。",
            "凌晨三点还在刷YouTube",
            "一个日本艺术家把城市噪音变成了建筑模型。这什么操作？？",
            "晚饭吃的黄焖鸡。",
            "今天天气不错终于出太阳了",
            "最近在学 Python，跟着一个教程做了个爬虫抓豆瓣电影评分。代码跑通了但不知道学来干嘛。感觉编程能力和想做的事之间差了一个太平洋。",
            "买了个 MIDI 键盘还没拆封",
            "转发了一篇文章《当代码遇上艺术：创意编程的十个入口》但还没看完。",
            "和老张聊天。他说他们公司在做 AR 滤镜，用的 Unity + Shader。我问什么是 Shader，他解释了半天我也只是大概有个感觉——就是用代码控制每个像素怎么显示的一种东西？听起来就是用数学画画。他给我看了 Shadertoy 上的一些作品，真的像魔法。有个叫 IQ 的人做的东西完全无法理解是怎么实现的。",
            "嗯",
            "spotify 年度报告出来了。我今年听了 4000 首歌。前五名全是电子乐。",
        ],
        "note": "Profile 中没有直接提到音频可视化需求，但有明确的兴趣痕迹：Processing、TouchDesigner、VJ、MIDI、生成艺术、创意编程、Shader。长短碎片混合。",
    },
    {
        "query": "用技术做点有意义的事",
        "level": "L4",
        "expected_hits": [
            "git_push_origin_love", "dai_ma_wu_tuo_bang",
            "stack_overflow_soul", "code_monk",
        ],
        "min_hits": 1,
        "profile_fragments": [
            "刚毕业三个月。在一家外包公司写 Java CRUD。每天复制粘贴感觉脑子在退化。",
            "大学的时候参加过一次公益编程活动。给一个贵州的农村小学做了个在线图书馆系统。用 Vue + Firebase 搭的，很简单的东西，但校长拿到的时候那个表情我一辈子忘不了。他说之前孩子们想看书得走两个小时山路去镇上。我那个项目后来也没人维护挂了。但那是我写代码最有成就感的一次。后来再也没有过那种感觉。现在想起来还是会想——到底是代码有意义还是那件事有意义？如果代码本身没有意义，我为什么要写代码？",
            "转发了一篇关于开源社区的文章。配文：这才是程序员该干的事",
            "知乎收藏夹有个文件夹叫「意义」，里面收藏了：「有哪些改变世界的开源项目」「程序员如何找到工作的意义」「辞职做独立开发者是什么体验」「30岁转行晚不晚」",
            "今天中午吃的外卖太难吃了",
            "下午开会老板又在画大饼",
            "GitHub 上 star 了 30 个项目但一个都没贡献过。最近在看一个叫 FreeCodeCamp 的东西。它好像是完全开源免费的编程教育平台？有点心动想贡献代码但怕自己水平不够被人嘲笑。",
            "和大学室友视频聊天。他在一个NGO做气候变化相关的数据分析。工资比我低一半但每天精神抖擞。羡慕他找到了方向。我问他怎么找到的，他说'不是找到的，是撞上的，有天看到一组数据就觉得这事非做不可'。",
            "睡前刷到一个 TED 演讲：一个工程师用无人机在非洲送药。看完躺在床上想了很久。",
            "失眠了。",
        ],
        "note": "Profile 是一个对现状不满、渴望意义感的年轻程序员。痕迹：公益编程经历、开源关注、NGO朋友、技术公益TED。长段与短句交错。",
    },
    {
        "query": "把传统手艺和数字技术结合",
        "level": "L4",
        "expected_hits": [
            "lao_tie_rust", "ink_alchemist", "leather_punk",
            "memory_weaver", "ink_and_pixel", "diao_ke_shi_shader",
        ],
        "min_hits": 2,
        "profile_fragments": [
            "周末去了景德镇。",
            "看了个老师傅拉坯，手速惊人但店里冷冷清清。他说现在年轻人都不学这个了。他做了四十年瓷器，手上全是老茧。问他最得意的作品，他指了下角落里一个薄胎碗——举起来对着光能看到手指的影子。但这种东西淘宝上99块就有机器做的，虽然不透光，但大多数人不在乎。我在想如果能用某种方式让人体验到手工和机器的区别……但怎么体验？你总不能让所有人都来景德镇摸一下那个碗。",
            "爸妈寄了一箱自家腌的咸菜。包装用的是爷爷写的毛笔字贴的标签。",
            "关注了一个 Bilibili UP 主，专门拍各种手工匠人",
            "有个做漆器的，把 LED 灯珠嵌进去了，效果惊艳。但评论区吵翻了——一半人说这是创新，一半人说这是糟蹋传统。",
            "公司项目用 React + Three.js 做了个3D展示。做的时候突然想到那个漆器——能不能用 3D 扫描把传统工艺品的质感复原到网页上？不是照片，是那种你可以转着看、放大看纹理的那种？",
            "今天下雨了",
            "路过一个裱画店。进去看了看。老板说生意不好，都去网上打印了。他给我看了一幅宣纸上的水墨，说这种墨在宣纸上洇开的效果，打印永远做不出来。我突然想到——如果用流体模拟算法模拟墨在宣纸上的物理过程……这个有人做过吗？",
            "小红书收藏了好几个：用 Arduino 做的自动织布机、3D扫描敦煌壁画、AI修复老照片",
            "晚上加班，debug 一个 CSS 动画。突然想到如果用 Shader 来模拟水墨画的渲染效果会怎样。搜了一下，真有人做过。一个叫《奥利与迷雾森林》的游戏里的水彩渲染效果太美了。",
            "外婆寄了双手工布鞋。穿着特别舒服但样子有点土。想到能不能用参数化设计改造传统鞋型——保留手工的舒适但用计算优化外观？",
        ],
        "note": "一个关注传统工艺的技术人的完整生活。景德镇深度体验、漆器+LED争议、3D扫描想法、水墨Shader、参数化鞋型。大段反思与一个字的碎片共存。",
    },
    {
        "query": "认识一些有趣的人",
        "level": "L4",
        "expected_hits": [
            "lao_tie_rust", "san_xing_lv_shi", "zhan_bu_shi",
            "shou_yi_ren", "fei_xing_yuan_404",
        ],
        "min_hits": 1,
        "profile_fragments": [
            "在一家互联网公司做了三年前端。同事都是程序员，聊的都是代码和股票。有点无聊。不是说他们不好，是同质化太严重了——KTV 唱的歌都差不多，旅行都去日本，投的基金都一样。",
            "上个月参加了一个跨界沙龙。遇到一个从律师转行做设计的人。她说她打了五年官司，有天突然觉得法律条文和排版设计本质上是一回事——都是在约束条件内寻找最优表达。聊了两个小时觉得特别有意思。",
            "播客收听记录：《故事FM》《随机波动》《忽左忽右》",
            "最近特别喜欢听人聊职业转型的故事",
            "朋友圈发了条：想认识不同行业的人，有没有什么有趣的社群推荐？（3个赞0条评论）",
            "今天去了个精酿啤酒吧。旁边坐了个飞行员在讲他在非洲的故事——说有次在肯尼亚差点撞到一群火烈鸟。我说真的假的。他掏出手机给我看照片。真的。后来他还说他退休后想学编程。我说你为什么想学编程。他说因为飞了三十年觉得天上能做的事都做了，想看看地面上还能做什么。这种人太酷了。",
            "豆瓣标记了《月亮与六便士》已读。写了短评：所以到底什么时候才是离开舒适区的正确时机？",
            "周末逛了个市集。一个摊主是退休的物理老师在卖自己做的木工。他做了一套鲁班锁，不用胶水不用钉子。我问他这个做了多久。他说做了一年。我问值吗。他说时间花在你想花的地方就值了。",
            "微博转发：一个兽医在业余时间搞机器学习做动物疾病预测。我评论了：这种跨界太酷了",
            "烦",
        ],
        "note": "一个对同质化环境厌倦、渴望跨界交流的人。律师转设计师、飞行员学编程、物理老师做木工、兽医搞ML——全是跨界人物的痕迹。",
    },

    # ================================================================
    # L3 查询 — 互补匹配（选两条有代表性的）
    # ================================================================
    {
        "query": "我的网站太丑了需要重新设计",
        "level": "L3",
        "expected_hits": [
            "broken_mirror", "ctrl_z", "wu_ming_zhi",
            "san_xing_lv_shi", "pixel_chef",
        ],
        "min_hits": 2,
        "profile_fragments": [
            "自己做了个个人博客，用 Hugo 模板改的。改了三天 CSS 还是很丑。字体大小不对、颜色不搭、间距奇怪，问了 ChatGPT 十几次也说不出为什么就是不对。我觉得设计师和程序员的眼睛一定长在不同的频率上。",
            "在 Dribbble 上收藏了 50 多个设计",
            "但自己做出来完全不是那个感觉",
            "朋友说我的网站像 2005 年做的。他说的对。",
            "试过用 Tailwind CSS 但配色怎么搭都不好看。什么色彩理论？三原色我知道，然后呢？互补色、类比色、三角配色……看完教程更迷茫了。算了先用黑白灰。",
            "午饭吃的兰州拉面",
            "加了个蛋",
            "GitHub 上看了几个开源的 portfolio 模板。都很好看但一改就崩。",
            "转发了一篇《设计师和程序员的思维差异》，配文：我就是那个审美为零的程序员",
        ],
        "note": "Profile 里有间接证据：做了丑博客、Dribbble、色彩理论困惑。'午饭吃的兰州拉面'和'加了个蛋'是两条完全无关的独立碎片。",
    },
    {
        "query": "我的项目需要做安全审计",
        "level": "L3",
        "expected_hits": [
            "cyber_monk", "zero_day", "blockchain_skeptic",
            "grey_hat", "ghost_in_shell",
        ],
        "min_hits": 2,
        "profile_fragments": [
            "最近在做一个 DeFi 项目。Solidity 合约写了两个月了，总觉得有安全漏洞但不知道在哪。上线前必须找人看看。",
            "推特关注了几个安全研究员。看他们发的漏洞分析报告，学到很多但也越看越怕。Reentrancy attack、flash loan exploit、front-running……每一种都可能让我的合约归零。",
            "上周在 Telegram 群里看到一个项目被黑了 200 万美金。合约代码是开源的，事后分析说是一个 unchecked return value。就这么一行代码，200 万没了。不想成为下一个。",
            "今天早上跑了 5 公里。天气好。",
            "试过用 Slither 自动审计，报了一堆 warning。大概30个。花了两天看了一半，有些是误报，有些看不懂是不是真正的问题。自动化工具能覆盖70%的低级错误，但逻辑漏洞它检测不出来。需要有人理解业务逻辑才行。",
            "和合伙人吵了一架。他说先上线再说安全。我说不行。他说你太怂。我说等你被黑了你就知道谁怂了。",
            "嗯。",
            "收藏了一篇文章《如何选择靠谱的智能合约审计公司》。报价从5000刀到50万刀都有。这行水太深了。",
        ],
        "note": "Profile 明确指向 DeFi + 智能合约安全焦虑。Solidity、Reentrancy、Slither、审计报价——全是间接证据。",
    },
]
