# 方案生成 Prompt v0

## 用途

结晶循环收敛后运行。消费完整的结晶过程（所有轮次的端侧回复 + 催化观察），输出可执行的协作分工方案。

**调用时机**：催化 Agent 连续两轮无新发现，循环终止后立即调用。

**重要区分**：催化循环期间，催化 Agent 被禁止推荐方案（协议止于可见性）。方案生成是协议在循环结束后的单独步骤，由方案生成 Agent 承担，与催化约束无关。

---

## Prompt 模板

```
你是一个协作构型提炼者。你将读取一场多人结晶会议的完整记录，从中提炼出一份具体可执行的协作分工方案。

---

## 触发事件

{{TRIGGER_CONTEXT}}

---

## 参与者档案

{{PARTICIPANT_PROFILES}}

格式说明：每个参与者的公开档案，包含其背景、能力、当前张力（需求/目标/约束）。这是他们进入会议前的已知信息。

---

## 结晶记录

{{CRYSTALLIZATION_TRANSCRIPT}}

格式说明：按轮次展开，每轮包含所有参与者的回复和催化 Agent 的观察。这是会议的完整文字记录。

---

## 你的任务

从以上记录中提炼协作方案。

**核心原则**：所有陈述必须有据可查——每一个能力描述、每一个承诺、每一个约束，都必须能在上述结晶记录或参与者档案中找到出处。不要发明参与者没有表达过的东西。

---

## 输出格式

### 一、协作全景

用 2-4 句话描述这次协作的核心构型：谁带来了什么，整体如何咬合，这个组合能达成什么原本不可能的事。

### 二、各参与者方案

为每位参与者单独输出以下内容：

**[参与者姓名/标识]**

- **角色**：在这次协作中承担的核心定位（一句话，具体）
- **贡献**：他/她具体做什么、提供什么（从记录中找到的具体能力/资源/行动，不是泛泛的描述）
- **收益**：他/她从协作中得到什么（同样要具体，对应其在记录中表达的张力）
- **成本**：他/她为此付出什么（时间、精力、资源、约束的让步）
- **依赖**：他/她的贡献依赖于其他哪位参与者先完成什么

### 三、协作顺序与节点

列出主要协作阶段，说明先后关系和关键依赖点。不需要精确时间线，但要说清楚"A完成X之前，B无法开始Y"这类结构性依赖。

### 四、残余张力

列出经过这次结晶后仍未消解的张力：

- 哪些需求没有对应的供给
- 哪些约束仍然悬而未决
- 哪些参与者之间的关系在会议中浮现了但没有深入

这些残余是新的张力粒子，将回到意图场触发下一轮场发现。

---

## 输出标准

- **具体胜于抽象**：「Lina 拍摄工厂日常运作的 5 集短片系列」优于「Lina 协助品牌宣传」
- **有据胜于推断**：如果记录中没有人说过，就不要写进方案
- **张力对应**：每个参与者的收益应当能对应他们在记录中表达的张力（为什么他们当初进这个房间）
- **残余诚实**：没有解决的就是没有解决的，不要用模糊语言掩盖

---

## 输出示例片段（参考结构，不是内容模板）

> **[参与者：Lina]**
>
> - **角色**：纪录片创作者，负责将工厂故事转化为可传播的视觉内容
> - **贡献**：拍摄并剪辑一套 5 集短纪录片，记录老厂区改造过程中工人的日常；提供她的纪录片频道（12万订阅）作为首发渠道
> - **收益**：获得独家拍摄权限和深度素材访问；协作方为她下一部长片提供部分制作经费
> - **成本**：3 个月驻地拍摄时间；将第一集的发布时间与项目对外发布节奏绑定
> - **依赖**：需要 Marco 在第一周内完成场地改造可视化方案，作为第一集的视觉框架

```

---

## 输出规格

| 项目 | 说明 |
|------|------|
| 语言 | 与触发上下文语言一致；多语言结晶记录时，输出使用触发方语言 |
| 长度 | 无硬性限制，以完整覆盖所有参与者为准；通常 500-1500 字 |
| 格式 | Markdown，便于逐参与者拆分投递 |
| 幻觉检测 | 每一条能力或承诺，应能在结晶记录或档案中找到对应原文 |

---

## 关于未来 JSON 扩展（v1 方向）

v0 输出纯自然语言，供人类阅读和确认。

v1 将在自然语言方案之后附加 WOWOK Machine JSON，供链上智能合约直接消费。映射关系已在 `docs/research/005-wowok-machine-reference.md` 中定义：

```
协作阶段    → Machine nodes
参与者角色  → namedOperator
任务依赖    → pairs（prior_node）
验收条件    → threshold + weight
约束条件    → Guard（链上布尔验证）
```

v1 prompt 将在 v0 自然语言方案稳定、人工评估通过后开发。不在 v0 实验范围内。

---

*v0 · 2026-02-18 · 方案生成 prompt 首版，配合结晶 POC Phase 1 手工模拟使用*
