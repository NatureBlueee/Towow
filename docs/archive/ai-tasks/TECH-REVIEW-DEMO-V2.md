# TECH-REVIEW-DEMO-V2: åˆ›ä¸šè€…æ‰¾æŠ€æœ¯åˆä¼™äººåœºæ™¯æŠ€æœ¯è¯„å®¡

## æ–‡æ¡£å…ƒä¿¡æ¯

| å­—æ®µ | å€¼ |
|------|-----|
| æ–‡æ¡£ç±»å‹ | æŠ€æœ¯è¯„å®¡æŠ¥å‘Š |
| çŠ¶æ€ | DRAFT |
| åˆ›å»ºæ—¥æœŸ | 2026-01-30 |
| å…³è”æ–‡æ¡£ | `demo_scenario.json`, `app.py:simulate_negotiation` |

---

## 1. åœºæ™¯è®¾è®¡è¯„ä¼°

### 1.1 æ ¸å¿ƒä»·å€¼ä½“ç°åˆ†æ

| ä»·å€¼ç‚¹ | ç°æœ‰åœºæ™¯ï¼ˆç‹¬ç«‹éŸ³ä¹äººï¼‰ | æ–°åœºæ™¯ï¼ˆæŠ€æœ¯åˆä¼™äººï¼‰ | è¯„ä¼° |
|--------|------------------------|----------------------|------|
| **åå•†åˆ›é€ ** | æš–åœºå˜‰å®¾æ˜¯åå•†ä¸­äº§ç”Ÿçš„æ–°æƒ³æ³• | æœ€ç»ˆæ–¹æ¡ˆå®Œå…¨é‡æ„äº†åŸå§‹éœ€æ±‚ | **æ›´å¼º** - ä»"æ‰¾åˆä¼™äºº"å˜æˆ"éªŒè¯éœ€æ±‚çš„èƒ½åŠ›" |
| **è®¤çŸ¥è½¬å˜** | é¢„ç®—ä¼˜åŒ– | ç”¨æˆ·è®¤çŸ¥ä»"éœ€è¦æŠ€æœ¯åˆä¼™äºº"è½¬å˜ä¸º"éœ€è¦å¿«é€ŸéªŒè¯" | **æ›´å¼º** - ä½“ç°äº† ToWow çš„æ ¸å¿ƒå·®å¼‚åŒ– |
| **æ„å¤–å‘ç°** | åœºåœ°è€æ¿æ˜¯éŸ³ä¹çˆ±å¥½è€… | Notion æ¨¡æ¿ä½œè€…æ­ç¤º"ç”¨æˆ·é—®çš„æ˜¯æ€ä¹ˆæ‰¾å®¢æˆ·" | **æ›´å¼º** - ç›´æ¥æŒ‘æˆ˜ç”¨æˆ·å‡è®¾ |
| **å­ç½‘é€’å½’** | å¯»æ‰¾æš–åœºå˜‰å®¾ | å¯è®¾è®¡ä¸º"éªŒè¯éœ€æ±‚æ–¹æ³•"å­ç½‘ | **ç›¸å½“** |
| **å¾®å°çš„å…‰** | å¤šä¸ªå°ä¼— Agent æœåŠ¡ç‹¬ç«‹éŸ³ä¹äºº | å¤šä¸ªä¸åŒç±»å‹ Agent å…±åŒæ„å»ºæ–¹æ¡ˆ | **ç›¸å½“** |

**ç»“è®º**: æ–°åœºæ™¯åœ¨ä½“ç° ToWow æ ¸å¿ƒä»·å€¼æ–¹é¢**æ›´ä¼˜**ï¼Œç‰¹åˆ«æ˜¯åœ¨"è®¤çŸ¥è½¬å˜"å’Œ"æ„å¤–å‘ç°"ä¸¤ä¸ªç»´åº¦ã€‚

### 1.2 åœºæ™¯è®¾è®¡äº®ç‚¹

1. **éœ€æ±‚é‡æ„**: åŸå§‹éœ€æ±‚æ˜¯"æ‰¾æŠ€æœ¯åˆä¼™äººï¼ˆ15%è‚¡ä»½ï¼‰"ï¼Œæœ€ç»ˆæ–¹æ¡ˆæ˜¯"1000å…ƒéªŒè¯éœ€æ±‚"
2. **å¤šå…ƒ Agent ç±»å‹**: åŒ…å«äººç±» Agentï¼ˆç¨‹åºå‘˜ã€æ•™ç»ƒï¼‰å’Œå·¥å…· Agentï¼ˆCursorã€Bubbleï¼‰
3. **æ¸è¿›å¼è®¤çŸ¥**: ä¸‰è½®åå•†é€æ­¥å¼•å¯¼ç”¨æˆ·è®¤çŸ¥è½¬å˜
4. **æˆæœ¬å¯¹æ¯”**: 1000å…ƒ vs 15%è‚¡ä»½ï¼Œç›´è§‚å±•ç¤ºä»·å€¼

### 1.3 æ½œåœ¨æ”¹è¿›å»ºè®®

1. **Agent æ•°é‡**: 7 ä¸ª Agent æ¯”ç°æœ‰åœºæ™¯çš„ 14 ä¸ªå°‘ï¼Œå»ºè®®è¡¥å…… 2-3 ä¸ª
   - å»ºè®®å¢åŠ : æ³•å¾‹é¡¾é—®ï¼ˆè‚¡æƒåè®®ï¼‰ã€åˆ›ä¸šç¤¾åŒºè¿è¥è€…ã€æŠ•èµ„äºº Agent
2. **å­ç½‘è§¦å‘**: å½“å‰è®¾è®¡ç¼ºå°‘æ˜ç¡®çš„å­ç½‘è§¦å‘ç‚¹ï¼Œå»ºè®®åœ¨ç¬¬äºŒè½®å¢åŠ 

---

## 2. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 2.1 demo_scenario.json ä¿®æ”¹æ–¹æ¡ˆ

#### 2.1.1 æ•°æ®ç»“æ„åˆ†æ [VERIFIED]

ç°æœ‰ `demo_scenario.json` ç»“æ„ï¼ˆ`requirement_demo/web/demo_scenario.json:1-549`ï¼‰:

```json
{
  "version": "1.0",
  "description": "...",
  "demoRequirement": { ... },
  "demoAgents": [ ... ],
  "negotiationScript": [ ... ],
  "subnetTriggers": [ ... ],
  "finalProposal": { ... }
}
```

#### 2.1.2 æ–°åœºæ™¯ JSON ç»“æ„è®¾è®¡

```json
{
  "version": "2.0",
  "description": "ToWow æ¼”ç¤ºåœºæ™¯ V2 - åˆ›ä¸šè€…æ‰¾æŠ€æœ¯åˆä¼™äºº",

  "demoRequirement": {
    "title": "å¯»æ‰¾æŠ€æœ¯åˆä¼™äºº",
    "description": "æˆ‘æœ‰ä¸€ä¸ªåˆ›ä¸šæƒ³æ³•ï¼Œæƒ³åšä¸€ä¸ªå¸®åŠ©è‡ªç”±èŒä¸šè€…ç®¡ç†å®¢æˆ·å’Œé¡¹ç›®çš„å·¥å…·ã€‚æˆ‘éœ€è¦æ‰¾ä¸€ä¸ªæŠ€æœ¯åˆä¼™äººï¼Œæœ€å¥½æ˜¯å…¨æ ˆå¼€å‘ï¼Œæ„¿æ„ç”¨ä¸šä½™æ—¶é—´ä¸€èµ·åšï¼Œå¯ä»¥ç»™15%çš„è‚¡ä»½ã€‚",
    "context": "è¿™ä¸ªéœ€æ±‚ä½“ç°äº†åˆ›ä¸šè€…å¸¸è§çš„è®¤çŸ¥åå·®â€”â€”ä»¥ä¸ºéœ€è¦'æŠ€æœ¯åˆä¼™äºº'ï¼Œå®é™…éœ€è¦çš„æ˜¯'å¿«é€ŸéªŒè¯éœ€æ±‚çš„èƒ½åŠ›'ã€‚"
  },

  "demoAgents": [
    {
      "id": "agent_alex",
      "name": "ç¨‹åºå‘˜Alex",
      "specialty": "å…¨æ ˆå¼€å‘",
      "type": "professional",
      "description": "5å¹´å…¨æ ˆç»éªŒï¼Œæƒ³æ‰¾å‰¯ä¸šé¡¹ç›®",
      "avatar_emoji": "ğŸ‘¨â€ğŸ’»",
      "tags": ["å…¨æ ˆ", "å‰¯ä¸š", "æŠ€æœ¯åˆä¼™"]
    },
    {
      "id": "agent_xiaolin",
      "name": "ç¨‹åºå‘˜å°æ—",
      "specialty": "è‡ªç”±å¼€å‘",
      "type": "professional",
      "description": "è‡ªç”±å¼€å‘è€…ï¼ŒæŒ‰é¡¹ç›®æˆ–å°æ—¶æ”¶è´¹",
      "avatar_emoji": "ğŸ’»",
      "tags": ["è‡ªç”±èŒä¸š", "æŒ‰éœ€å¼€å‘", "å’¨è¯¢"]
    },
    {
      "id": "agent_studio",
      "name": "å¤–åŒ…å·¥ä½œå®¤",
      "specialty": "æ•´åŒ…å¼€å‘",
      "type": "service",
      "description": "3äººå°å›¢é˜Ÿï¼Œæä¾›æ•´åŒ…å¼€å‘æœåŠ¡",
      "avatar_emoji": "ğŸ¢",
      "tags": ["å¤–åŒ…", "å›¢é˜Ÿ", "æ•´åŒ…"]
    },
    {
      "id": "agent_cursor",
      "name": "Cursor (AIç¼–ç¨‹)",
      "specialty": "AIè¾…åŠ©ç¼–ç¨‹",
      "type": "tool",
      "description": "AIç¼–ç¨‹å·¥å…·ï¼Œå¯ç”Ÿæˆ70%çš„å¸¸è§åŠŸèƒ½ä»£ç ",
      "avatar_emoji": "ğŸ¤–",
      "tags": ["AI", "ç¼–ç¨‹", "å·¥å…·"]
    },
    {
      "id": "agent_coach",
      "name": "äº§å“æ•™ç»ƒè€ç‹",
      "specialty": "äº§å“å’¨è¯¢",
      "type": "professional",
      "description": "å‰å¤§å‚äº§å“æ€»ç›‘ï¼Œç‹¬ç«‹å’¨è¯¢å¸ˆ",
      "avatar_emoji": "ğŸ¯",
      "tags": ["äº§å“", "å’¨è¯¢", "éªŒè¯"]
    },
    {
      "id": "agent_notion",
      "name": "Notionæ¨¡æ¿ä½œè€…",
      "specialty": "è‡ªç”±èŒä¸šè€…å·¥å…·",
      "type": "niche",
      "description": "åšè¿‡è‡ªç”±èŒä¸šè€…ç®¡ç†æ¨¡æ¿ï¼Œäº†è§£çœŸå®ç”¨æˆ·éœ€æ±‚",
      "avatar_emoji": "ğŸ“",
      "tags": ["æ¨¡æ¿", "è‡ªç”±èŒä¸š", "ç”¨æˆ·æ´å¯Ÿ"]
    },
    {
      "id": "agent_bubble",
      "name": "Bubble (No-code)",
      "specialty": "æ— ä»£ç å¼€å‘",
      "type": "tool",
      "description": "No-codeå¼€å‘å¹³å°ï¼Œä¸¤å‘¨å¯åšå‡ºMVP",
      "avatar_emoji": "ğŸ«§",
      "tags": ["No-code", "MVP", "å¿«é€ŸéªŒè¯"]
    }
  ]
}
```

#### 2.1.3 åå•†è„šæœ¬è®¾è®¡ï¼ˆä¸‰è½®ï¼‰

**ç¬¬ä¸€è½®: éœ€æ±‚æ¾„æ¸… (discovery + clarification)**

```json
{
  "phase": "clarification",
  "phase_name": "éœ€æ±‚æ¾„æ¸…",
  "description": "Agent ä»¬å¼€å§‹æé—®ï¼Œå¸®åŠ©ç”¨æˆ·æ¾„æ¸…çœŸå®éœ€æ±‚",
  "messages": [
    {
      "sender": "system",
      "sender_name": "System",
      "content": "æ”¶åˆ°æ–°éœ€æ±‚ï¼šã€Œå¯»æ‰¾æŠ€æœ¯åˆä¼™äººã€",
      "type": "system",
      "delay_ms": 0
    },
    {
      "sender": "coordinator",
      "sender_name": "Coordinator",
      "content": "æ­£åœ¨åˆ†æéœ€æ±‚... è¯†åˆ«åˆ°å…³é”®è¯ï¼šæŠ€æœ¯åˆä¼™äººã€å…¨æ ˆå¼€å‘ã€15%è‚¡ä»½ã€è‡ªç”±èŒä¸šè€…å·¥å…·",
      "type": "system",
      "delay_ms": 1500
    },
    {
      "sender": "coordinator",
      "sender_name": "Coordinator",
      "content": "å·²è¯†åˆ« 7 ä¸ªç›¸å…³ Agentï¼Œæ­£åœ¨é‚€è¯·å‚ä¸åå•†...",
      "type": "system",
      "delay_ms": 2000
    },
    {
      "sender": "agent_coach",
      "sender_name": "äº§å“æ•™ç»ƒè€ç‹",
      "content": "åœ¨è®¨è®ºæŠ€æœ¯åˆä¼™äººä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆé—®ä¸€ä¸ªé—®é¢˜ï¼šä½ éªŒè¯è¿‡è¿™ä¸ªéœ€æ±‚å—ï¼Ÿæœ‰å¤šå°‘è‡ªç”±èŒä¸šè€…è¡¨ç¤ºæ„¿æ„ä¸ºè¿™æ ·çš„å·¥å…·ä»˜è´¹ï¼Ÿ",
      "type": "question",
      "delay_ms": 2500,
      "metadata": {
        "question_type": "validation",
        "importance": "critical"
      }
    },
    {
      "sender": "agent_alex",
      "sender_name": "ç¨‹åºå‘˜Alex",
      "content": "15%è‚¡ä»½å¬èµ·æ¥ä¸é”™ï¼Œä½†æˆ‘éœ€è¦äº†è§£æ›´å¤šï¼šä½ æœ‰äº§å“åŸå‹å—ï¼Ÿç›®æ ‡ç”¨æˆ·ç”»åƒæ˜¯ä»€ä¹ˆï¼Ÿé¢„è®¡å¤šä¹…èƒ½æœ‰æ”¶å…¥ï¼Ÿ",
      "type": "question",
      "delay_ms": 1800
    }
  ]
}
```

**ç¬¬äºŒè½®: æ›¿ä»£æ–¹æ¡ˆæµ®ç° (alternatives)**

```json
{
  "phase": "alternatives",
  "phase_name": "æ›¿ä»£æ–¹æ¡ˆ",
  "description": "æ„å¤–å‘ç°å’Œæ›¿ä»£æ–¹æ¡ˆå¼€å§‹æµ®ç°",
  "messages": [
    {
      "sender": "agent_notion",
      "sender_name": "Notionæ¨¡æ¿ä½œè€…",
      "content": "æˆ‘åšè‡ªç”±èŒä¸šè€…ç®¡ç†æ¨¡æ¿ä¸¤å¹´äº†ï¼Œæœ‰ä¸ªæœ‰è¶£çš„å‘ç°ï¼šç”¨æˆ·é—®å¾—æœ€å¤šçš„ä¸æ˜¯'æ€ä¹ˆç®¡ç†é¡¹ç›®'ï¼Œè€Œæ˜¯'æ€ä¹ˆæ‰¾åˆ°æ›´å¤šå®¢æˆ·'ã€‚ä½ ç¡®å®šä½ è¦è§£å†³çš„æ˜¯ç®¡ç†é—®é¢˜å—ï¼Ÿ",
      "type": "insight",
      "delay_ms": 2000,
      "metadata": {
        "insight_type": "user_research",
        "importance": "high"
      }
    },
    {
      "sender": "agent_bubble",
      "sender_name": "Bubble (No-code)",
      "content": "å¦‚æœåªæ˜¯éªŒè¯æƒ³æ³•ï¼Œç”¨ Bubble ä¸¤å‘¨å°±èƒ½åšå‡º MVPã€‚æœˆè´¹ 200 å…ƒï¼Œä¸éœ€è¦æŠ€æœ¯åˆä¼™äººã€‚å…ˆéªŒè¯å†æ‰¾äººï¼Œé£é™©æ›´ä½ã€‚",
      "type": "offer",
      "delay_ms": 1500,
      "metadata": {
        "offer_type": "tool",
        "price": 200,
        "unit": "æœˆ"
      }
    },
    {
      "sender": "agent_cursor",
      "sender_name": "Cursor (AIç¼–ç¨‹)",
      "content": "å¦‚æœä½ æœ‰åŸºç¡€ç¼–ç¨‹èƒ½åŠ›ï¼Œ70%çš„åŠŸèƒ½æˆ‘å¯ä»¥å¸®ä½ ç”Ÿæˆä»£ç ã€‚é…åˆ Bubble æˆ–è€…ç®€å•çš„æ¡†æ¶ï¼Œä¸€ä¸ªäººä¹Ÿèƒ½åšå‡ºåŸå‹ã€‚",
      "type": "offer",
      "delay_ms": 1200,
      "metadata": {
        "offer_type": "tool",
        "capability": "70%ä»£ç ç”Ÿæˆ"
      }
    },
    {
      "sender": "agent_studio",
      "sender_name": "å¤–åŒ…å·¥ä½œå®¤",
      "content": "æ•´åŒ…å¼€å‘ä¸€ä¸ª MVP å¤§æ¦‚ 2-3 ä¸‡ï¼Œå‘¨æœŸ 1-2 ä¸ªæœˆã€‚ä½†è¯´å®è¯ï¼Œå¦‚æœéœ€æ±‚è¿˜æ²¡éªŒè¯ï¼Œæˆ‘å»ºè®®å…ˆç”¨ä½æˆæœ¬æ–¹å¼è¯•è¯•ã€‚",
      "type": "offer",
      "delay_ms": 1800,
      "metadata": {
        "offer_type": "service",
        "price_range": "2-3ä¸‡",
        "timeline": "1-2ä¸ªæœˆ",
        "recommendation": "å…ˆéªŒè¯"
      }
    }
  ]
}
```

**ç¬¬ä¸‰è½®: æ–¹æ¡ˆç»„åˆ (synthesis)**

```json
{
  "phase": "synthesis",
  "phase_name": "æ–¹æ¡ˆç»„åˆ",
  "description": "Agent ä»¬åä½œæ„å»ºæœ€ç»ˆæ–¹æ¡ˆ",
  "messages": [
    {
      "sender": "agent_xiaolin",
      "sender_name": "ç¨‹åºå‘˜å°æ—",
      "content": "æˆ‘æœ‰ä¸ªå»ºè®®ï¼šä½ å…ˆç”¨ Bubble åš MVPï¼Œé‡åˆ°æŠ€æœ¯é—®é¢˜æŒ‰å°æ—¶é—®æˆ‘ï¼Œ200 å—ä¸€å°æ—¶ã€‚è¿™æ ·æˆæœ¬å¯æ§ï¼Œä¹Ÿèƒ½å­¦åˆ°ä¸œè¥¿ã€‚",
      "type": "offer",
      "delay_ms": 2000,
      "metadata": {
        "offer_type": "consulting",
        "price": 200,
        "unit": "å°æ—¶"
      }
    },
    {
      "sender": "agent_coach",
      "sender_name": "äº§å“æ•™ç»ƒè€ç‹",
      "content": "æˆ‘å¯ä»¥èŠ± 2 å°æ—¶å¸®ä½ æ¢³ç†äº§å“æ–¹å‘å’ŒéªŒè¯æ–¹æ³•ï¼Œæ”¶è´¹ 500 å…ƒã€‚è¿™æ¯”ç›´æ¥æ‰¾æŠ€æœ¯åˆä¼™äººæ›´é‡è¦â€”â€”æ–¹å‘é”™äº†ï¼ŒæŠ€æœ¯å†å¥½ä¹Ÿæ²¡ç”¨ã€‚",
      "type": "offer",
      "delay_ms": 1500,
      "metadata": {
        "offer_type": "consulting",
        "price": 500,
        "duration": "2å°æ—¶"
      }
    },
    {
      "sender": "agent_alex",
      "sender_name": "ç¨‹åºå‘˜Alex",
      "content": "è¯´å®è¯ï¼Œç°é˜¶æ®µæ‰¾æŠ€æœ¯åˆä¼™äººæ—¶æœºä¸å¯¹ã€‚ç­‰ä½ éªŒè¯äº†éœ€æ±‚ã€æœ‰äº†ä»˜è´¹ç”¨æˆ·ï¼Œå†æ¥æ‰¾æˆ‘èŠåˆä¼™çš„äº‹ã€‚é‚£æ—¶å€™æˆ‘ä»¬éƒ½æ›´æœ‰ä¿¡å¿ƒã€‚",
      "type": "advice",
      "delay_ms": 1800,
      "metadata": {
        "advice_type": "timing",
        "condition": "æœ‰ä»˜è´¹ç”¨æˆ·å"
      }
    },
    {
      "sender": "agent_notion",
      "sender_name": "Notionæ¨¡æ¿ä½œè€…",
      "content": "æˆ‘å¯ä»¥åˆ†äº«ä¸€äº›ç”¨æˆ·åé¦ˆæ•°æ®ç»™ä½ ï¼Œå¸®ä½ äº†è§£è‡ªç”±èŒä¸šè€…çš„çœŸå®ç—›ç‚¹ã€‚è¿™ä¸ªå…è´¹ï¼Œç®—æ˜¯åŒè¡Œäº’åŠ©ã€‚",
      "type": "offer",
      "delay_ms": 1200,
      "metadata": {
        "offer_type": "information",
        "price": 0
      }
    },
    {
      "sender": "coordinator",
      "sender_name": "Coordinator",
      "content": "å„æ–¹å·²è¾¾æˆå…±è¯†ï¼Œæ­£åœ¨ç”Ÿæˆæœ€ç»ˆåä½œæ–¹æ¡ˆ...",
      "type": "system",
      "delay_ms": 2000
    }
  ]
}
```

### 2.2 simulate_negotiation å‡½æ•°ä¿®æ”¹

#### 2.2.1 ç°æœ‰å®ç°åˆ†æ [VERIFIED]

ç°æœ‰ `simulate_negotiation` å‡½æ•°ï¼ˆ`requirement_demo/web/app.py:1258-1384`ï¼‰å·²ç»æ”¯æŒ:
- ä» `demo_scenario.json` åŠ è½½é…ç½®
- æŒ‰é˜¶æ®µå‘é€æ¶ˆæ¯
- æ”¯æŒ `delay_ms` æ§åˆ¶æ¶ˆæ¯é—´éš”
- æ”¯æŒ `metadata` ä¼ é€’é¢å¤–ä¿¡æ¯
- å‘é€ `phase_start` äº‹ä»¶
- å‘é€ `negotiation_complete` äº‹ä»¶

#### 2.2.2 éœ€è¦çš„ä¿®æ”¹

**æ— éœ€ä¿®æ”¹æ ¸å¿ƒé€»è¾‘**ã€‚ç°æœ‰å®ç°å·²ç»è¶³å¤Ÿçµæ´»ï¼Œåªéœ€è¦æ›´æ–° `demo_scenario.json` å³å¯ã€‚

ä½†å»ºè®®å¢åŠ ä»¥ä¸‹å¢å¼ºåŠŸèƒ½:

1. **æ”¯æŒå¤šåœºæ™¯åˆ‡æ¢**ï¼ˆå¯é€‰ï¼‰:
```python
# app.py æ–°å¢
DEMO_SCENARIOS = {
    "musician": "demo_scenario_musician.json",
    "cofounder": "demo_scenario_cofounder.json",
}

def get_demo_scenario(scenario_name: str = "cofounder") -> dict:
    """è·å–æŒ‡å®šåœºæ™¯çš„é…ç½®"""
    filename = DEMO_SCENARIOS.get(scenario_name, "demo_scenario.json")
    # ... åŠ è½½é€»è¾‘
```

2. **æ”¯æŒ insight ç±»å‹æ¶ˆæ¯çš„ç‰¹æ®Šå¤„ç†**ï¼ˆå¯é€‰ï¼‰:
```python
# åœ¨ send_message ä¸­å¢åŠ 
if msg_type == "insight":
    metadata["highlight"] = True  # å‰ç«¯å¯ä»¥é«˜äº®æ˜¾ç¤º
```

### 2.3 å‰ç«¯è°ƒæ•´

#### 2.3.1 ç°æœ‰å®ç°åˆ†æ [VERIFIED]

- `NegotiationMessage` ç±»å‹ï¼ˆ`types/experience.ts:25-33`ï¼‰æ”¯æŒ `text`, `system`, `action` ä¸‰ç§ç±»å‹
- `MessageBubble` ç»„ä»¶ï¼ˆ`components/experience/MessageBubble.tsx`ï¼‰æ ¹æ® `message_type` æ¸²æŸ“ä¸åŒæ ·å¼
- `NegotiationTimeline` ç»„ä»¶ï¼ˆ`components/experience/NegotiationTimeline.tsx`ï¼‰å±•ç¤ºæ¶ˆæ¯åˆ—è¡¨

#### 2.3.2 å»ºè®®çš„å‰ç«¯å¢å¼º

1. **æ‰©å±•æ¶ˆæ¯ç±»å‹**:
```typescript
// types/experience.ts
export interface NegotiationMessage {
  message_id: string;
  channel_id: string;
  sender_id: string;
  sender_name: string;
  message_type: 'text' | 'system' | 'action' | 'question' | 'insight' | 'offer' | 'advice';
  content: string;
  timestamp: string;
  metadata?: {
    avatar_emoji?: string;
    agent_type?: string;
    offer_type?: string;
    price?: number;
    insight_type?: string;
    importance?: 'low' | 'medium' | 'high' | 'critical';
  };
}
```

2. **MessageBubble æ ·å¼å¢å¼º**:
```css
/* MessageBubble.module.css æ–°å¢ */
.bubble.insight {
  border-left: 3px solid var(--c-warning);
  background: rgba(255, 193, 7, 0.1);
}

.bubble.question {
  border-left: 3px solid var(--c-info);
}

.bubble.offer {
  border-left: 3px solid var(--c-success);
}

.bubble.advice {
  border-left: 3px solid var(--c-primary);
}
```

3. **æ˜¾ç¤º Agent Emoji**:
```tsx
// MessageBubble.tsx ä¿®æ”¹
<div className={styles.avatar}>
  {message.metadata?.avatar_emoji || message.sender_name.charAt(0).toUpperCase()}
</div>
```

---

## 3. æŠ€æœ¯é£é™©ä¸æŒ‘æˆ˜

### 3.1 é£é™©è¯„ä¼°

| é£é™© | å½±å“ | å¯èƒ½æ€§ | ç¼“è§£æªæ–½ |
|------|------|--------|----------|
| æ¶ˆæ¯ç±»å‹æ‰©å±•å¯¼è‡´å‰ç«¯å…¼å®¹æ€§é—®é¢˜ | ä¸­ | ä½ | å‰ç«¯åšå¥½ç±»å‹é™çº§å¤„ç† |
| æ–°åœºæ™¯ JSON æ ¼å¼é”™è¯¯ | é«˜ | ä¸­ | å¢åŠ  JSON Schema éªŒè¯ |
| åå•†æ—¶é—´è¿‡é•¿å¯¼è‡´ç”¨æˆ·æµå¤± | ä¸­ | ä¸­ | ä¼˜åŒ– delay_msï¼Œæ§åˆ¶æ€»æ—¶é•¿åœ¨ 2 åˆ†é’Ÿå†… |
| å¤šåœºæ™¯åˆ‡æ¢å¢åŠ ç»´æŠ¤æˆæœ¬ | ä½ | ä½ | ä¿æŒå•åœºæ™¯ï¼Œé€šè¿‡ç‰ˆæœ¬æ§åˆ¶ç®¡ç† |

### 3.2 æŠ€æœ¯å€ºåŠ¡

1. **[OPEN] æ¶ˆæ¯ç±»å‹ç¡¬ç¼–ç **: å½“å‰ `message_type` åœ¨å¤šå¤„ç¡¬ç¼–ç ï¼Œå»ºè®®æŠ½å–ä¸ºå¸¸é‡
2. **[OPEN] ç¼ºå°‘ JSON Schema**: `demo_scenario.json` ç¼ºå°‘ Schema éªŒè¯
3. **[OPEN] å‰ç«¯ç±»å‹ä¸åŒæ­¥**: `NegotiationMessage` ç±»å‹åœ¨å¤šä¸ªæ–‡ä»¶ä¸­é‡å¤å®šä¹‰

---

## 4. å®ç°å»ºè®®

### 4.1 æ¨èå®ç°è·¯å¾„

**Phase 1: æœ€å°å¯è¡Œæ–¹æ¡ˆï¼ˆ1-2 å°æ—¶ï¼‰**
1. åˆ›å»ºæ–°çš„ `demo_scenario_v2.json`
2. ä¿æŒç°æœ‰ä»£ç ä¸å˜ï¼Œä»…æ›¿æ¢ JSON æ–‡ä»¶
3. æµ‹è¯•åå•†æµç¨‹

**Phase 2: å‰ç«¯å¢å¼ºï¼ˆ2-3 å°æ—¶ï¼‰**
1. æ‰©å±• `NegotiationMessage` ç±»å‹
2. æ›´æ–° `MessageBubble` æ ·å¼
3. æ”¯æŒ `avatar_emoji` æ˜¾ç¤º

**Phase 3: å¯é€‰å¢å¼ºï¼ˆ4-6 å°æ—¶ï¼‰**
1. æ”¯æŒå¤šåœºæ™¯åˆ‡æ¢
2. å¢åŠ  JSON Schema éªŒè¯
3. ä¼˜åŒ–åå•†æ—¶é—´æ§åˆ¶

### 4.2 éªŒæ”¶æ ‡å‡†

1. [ ] æ–°åœºæ™¯èƒ½å®Œæ•´è¿è¡Œï¼Œæ— æŠ¥é”™
2. [ ] ä¸‰è½®åå•†é€»è¾‘æ¸…æ™°ï¼Œç”¨æˆ·èƒ½ç†è§£è®¤çŸ¥è½¬å˜
3. [ ] æœ€ç»ˆæ–¹æ¡ˆå±•ç¤ºæ¸…æ™°ï¼ˆ1000å…ƒ vs 15%è‚¡ä»½å¯¹æ¯”ï¼‰
4. [ ] åå•†æ€»æ—¶é•¿æ§åˆ¶åœ¨ 2 åˆ†é’Ÿå†…
5. [ ] å‰ç«¯æ¶ˆæ¯å±•ç¤ºæ­£å¸¸ï¼Œæ ·å¼åŒºåˆ†æ˜æ˜¾

### 4.3 æµ‹è¯•è¦ç‚¹

1. **åŠŸèƒ½æµ‹è¯•**:
   - æäº¤éœ€æ±‚ååå•†æ­£å¸¸å¯åŠ¨
   - æ‰€æœ‰æ¶ˆæ¯æŒ‰é¡ºåºå±•ç¤º
   - æœ€ç»ˆæ–¹æ¡ˆæ­£ç¡®ç”Ÿæˆ

2. **è¾¹ç•Œæµ‹è¯•**:
   - WebSocket æ–­å¼€é‡è¿åæ¶ˆæ¯ä¸ä¸¢å¤±
   - å¿«é€Ÿé‡å¤æäº¤éœ€æ±‚çš„å¤„ç†

3. **ç”¨æˆ·ä½“éªŒæµ‹è¯•**:
   - æ¶ˆæ¯é—´éš”æ˜¯å¦è‡ªç„¶
   - è®¤çŸ¥è½¬å˜æ˜¯å¦æ¸…æ™°
   - æœ€ç»ˆæ–¹æ¡ˆæ˜¯å¦æœ‰è¯´æœåŠ›

---

## 5. æ€»ç»“

### 5.1 è¯„ä¼°ç»“è®º

æ–°åœºæ™¯è®¾è®¡**ä¼˜äº**ç°æœ‰åœºæ™¯ï¼Œæ›´å¥½åœ°ä½“ç°äº† ToWow çš„æ ¸å¿ƒä»·å€¼ï¼š
- **åå•†åˆ›é€ **: æœ€ç»ˆæ–¹æ¡ˆå®Œå…¨é‡æ„äº†åŸå§‹éœ€æ±‚
- **è®¤çŸ¥è½¬å˜**: ç”¨æˆ·ä»"æ‰¾åˆä¼™äºº"è½¬å˜ä¸º"éªŒè¯éœ€æ±‚"
- **æ„å¤–å‘ç°**: Notion æ¨¡æ¿ä½œè€…çš„ç”¨æˆ·æ´å¯Ÿ

### 5.2 æŠ€æœ¯å¯è¡Œæ€§

**å®Œå…¨å¯è¡Œ**ã€‚ç°æœ‰æ¶æ„å·²ç»æ”¯æŒæ–°åœºæ™¯çš„å®ç°ï¼Œä¸»è¦å·¥ä½œæ˜¯:
1. ç¼–å†™æ–°çš„ `demo_scenario.json`ï¼ˆä¸»è¦å·¥ä½œé‡ï¼‰
2. å¯é€‰çš„å‰ç«¯æ ·å¼å¢å¼º

### 5.3 å»ºè®®ä¼˜å…ˆçº§

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æ—¶ |
|------|--------|----------|
| ç¼–å†™æ–°åœºæ™¯ JSON | P0 | 2h |
| æµ‹è¯•åå•†æµç¨‹ | P0 | 1h |
| å‰ç«¯æ¶ˆæ¯ç±»å‹æ‰©å±• | P1 | 2h |
| å‰ç«¯æ ·å¼å¢å¼º | P1 | 1h |
| å¤šåœºæ™¯åˆ‡æ¢æ”¯æŒ | P2 | 3h |

---

## é™„å½•: å®Œæ•´ demo_scenario_v2.json è‰æ¡ˆ

[è§ä¸‹ä¸€èŠ‚ï¼Œå› ç¯‡å¹…é™åˆ¶å•ç‹¬è¾“å‡º]
