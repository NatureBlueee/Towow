# TASK-008 至 TASK-014：提示词集成与演示准备

---

## TASK-008：需求理解提示词集成

| 属性 | 值 |
|------|-----|
| 任务ID | TASK-008 |
| 所属Phase | Phase 3：提示词集成 |
| 依赖 | TASK-007 |
| 状态 | 待开始 |

### 任务描述
将提示词1（需求理解）集成到SecondMe Mock服务中。

### 具体工作
1. 将 `docs/prompts/01-需求理解.md` 转换为可执行的提示词模板
2. 在 MockSecondMeClient.understand_demand() 中使用
3. 测试不同输入的理解效果

### 验收标准
- [ ] 输出格式符合规范
- [ ] 能够识别动机、偏好、边界
- [ ] 诚实标注不确定性

---

## TASK-009：智能筛选提示词集成

| 属性 | 值 |
|------|-----|
| 任务ID | TASK-009 |
| 所属Phase | Phase 3：提示词集成 |
| 依赖 | TASK-004 |
| 状态 | 待开始 |

### 任务描述
完善提示词2（智能筛选）并集成到Coordinator中。

### 具体工作
1. 根据心理学模型完善筛选提示词
2. 在 Coordinator.smart_filter() 中使用
3. 测试筛选质量

### 验收标准
- [ ] 能够根据相关性筛选候选人
- [ ] 返回筛选理由
- [ ] 不遗漏明显相关的人

---

## TASK-010：回应生成提示词集成

| 属性 | 值 |
|------|-----|
| 任务ID | TASK-010 |
| 所属Phase | Phase 3：提示词集成 |
| 依赖 | TASK-006 |
| 状态 | 待开始 |

### 任务描述
完善提示词3（回应生成）并集成到SecondMe Mock中。

### 具体工作
1. 根据认知锚点框架完善提示词
2. 平衡乐观与准确
3. 在 MockSecondMeClient.generate_response() 中使用

### 验收标准
- [ ] 决策符合用户画像
- [ ] 不过度乐观
- [ ] 理由充分合理

---

## TASK-011：方案处理提示词集成

| 属性 | 值 |
|------|-----|
| 任务ID | TASK-011 |
| 所属Phase | Phase 3：提示词集成 |
| 依赖 | TASK-005 |
| 状态 | 待开始 |

### 任务描述
集成提示词4-9（方案聚合、反馈、调整、缺口识别、递归判断、妥协方案）。

### 具体工作
1. 方案聚合提示词 → ChannelAdmin._llm_aggregate()
2. 方案反馈提示词 → MockSecondMeClient.generate_feedback()
3. 方案调整提示词 → ChannelAdmin._llm_adjust()
4. 妥协方案提示词 → ChannelAdmin._generate_compromise()

### 验收标准
- [ ] 方案聚合合理
- [ ] 冲突处理透明
- [ ] 妥协方案有收获感

---

## TASK-012：测试数据准备

| 属性 | 值 |
|------|-----|
| 任务ID | TASK-012 |
| 所属Phase | Phase 4：演示准备 |
| 依赖 | TASK-003 |
| 状态 | 待开始 |

### 任务描述
准备100个Mock Agent简介数据。

### 具体工作
1. 设计多样化的Agent Profile
2. 覆盖不同地区、能力、兴趣
3. 导入数据库

### 数据设计

```python
# 地区分布
locations = [
    "北京朝阳", "北京海淀", "北京西城",
    "上海浦东", "上海徐汇",
    "深圳南山", "深圳福田",
    "杭州西湖", "成都高新"
]

# 能力类型
capabilities = [
    "场地资源", "活动策划", "技术分享",
    "设计能力", "市场推广", "投资人脉",
    "媒体资源", "内容创作", "社区运营"
]

# 兴趣领域
interests = [
    "AI/ML", "Web3", "创业", "投资",
    "产品设计", "技术开发", "市场营销",
    "艺术文化", "健康生活"
]

# 协作风格
styles = [
    "主动型：喜欢发起和组织",
    "支持型：乐于配合他人",
    "专家型：专注于自己擅长的领域",
    "探索型：喜欢尝试新事物"
]
```

### 验收标准
- [ ] 100个Agent简介已入库
- [ ] 数据多样性良好
- [ ] 可以被智能筛选正确识别

---

## TASK-013：端到端测试

| 属性 | 值 |
|------|-----|
| 任务ID | TASK-013 |
| 所属Phase | Phase 4：演示准备 |
| 依赖 | TASK-008, TASK-009, TASK-010, TASK-011, TASK-012 |
| 状态 | 待开始 |

### 任务描述
完整流程测试，确保从需求提交到方案生成的全流程正常。

### 测试场景

1. **场景A：活动组织**
   - 输入："我想在北京办一场50人的AI主题聚会"
   - 预期：筛选出场地、分享、策划相关的Agent

2. **场景B：资源对接**
   - 输入："我需要找一个懂AI的设计师帮我做产品原型"
   - 预期：筛选出设计能力+AI兴趣的Agent

3. **场景C：模糊需求**
   - 输入："最近压力很大，想找人聊聊"
   - 预期：理解情感需求，筛选合适的倾听者

### 验收标准
- [ ] 三个场景都能完成完整流程
- [ ] 筛选结果合理
- [ ] 方案输出有收获感
- [ ] 无明显Bug

---

## TASK-014：部署配置

| 属性 | 值 |
|------|-----|
| 任务ID | TASK-014 |
| 所属Phase | Phase 4：演示准备 |
| 依赖 | TASK-013 |
| 状态 | 待开始 |

### 任务描述
配置生产环境部署。

### 具体工作

1. **服务器准备**
   - 阿里云ECS开通
   - 安全组配置
   - 域名解析（如果需要）

2. **环境配置**
   ```bash
   # 安装依赖
   apt update && apt install -y python3.10 postgresql nginx

   # 配置PostgreSQL
   sudo -u postgres createuser towow
   sudo -u postgres createdb towow -O towow

   # 配置Nginx
   # 反向代理8000端口
   ```

3. **服务部署**
   ```bash
   # 克隆代码
   git clone <repo> /opt/towow

   # 安装Python依赖
   pip install -r requirements.txt

   # 初始化数据库
   python scripts/init_db.py

   # 启动服务
   uvicorn api.main:app --host 0.0.0.0 --port 8000
   ```

4. **监控配置**
   - 日志收集
   - 错误告警
   - 性能监控

### 验收标准
- [ ] 服务可公网访问
- [ ] API响应正常
- [ ] 日志正常记录
- [ ] 2000人并发测试通过（或有降级方案）

---

## 任务依赖图

```
TASK-001 ─┬─ TASK-002 ─┬─ TASK-004 ─── TASK-009
          │            │
          │            ├─ TASK-005 ─── TASK-011
          │            │
          │            └─ TASK-006 ─── TASK-010
          │                   │
          └─ TASK-003         │
                │             │
                └─ TASK-012   │
                              │
          TASK-007 ─── TASK-008
                              │
                              ↓
                         TASK-013 ─── TASK-014
```

---

**创建时间**: 2026-01-21
