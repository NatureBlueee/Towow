# Design Log #001: 投影、"自-我"与服务智能体

> 讨论日期：2026-02-07
> 参与者：架构师 + 创始人
> 状态：核心洞察已确立，待写入架构文档

---

## 核心发现：道 = 投影

整个通爻网络的架构可以归结为一个基本操作：**投影（Projection）**。

丰富的东西，通过一个透镜，投射出聚焦的东西。
反过来，多个聚焦的投影，重新组合，还原出比任何单一投影更丰富的东西。

```
道生一：自 → 投影 → 我（一个存在出现在场中）
一生二：我 发出扰动 → 场中其他存在共振（信号与响应，一对）
二生三：多个响应 → 聚合 → 方案（第三者涌现，超越任何单一响应）
三生万物：方案有缺口 → 递归 → 新的扰动 → 新的共振 → 无限生长
```

投影操作在系统中的分形体现：

| 层面 | 丰富的东西 | 透镜 | 聚焦的结果 |
|------|-----------|------|-----------|
| 存在 → 身份 | "自"（完备的场连接） | HDC 编码 | "我"（超向量画像） |
| 身份 → 面具 | Profile Data | 场景 Template | 手动面具 / Service Agent |
| 需求 → 信号 | 用户的完整意图 | DemandFormulation | HDC 签名 |
| 响应 → Offer | Agent 的完整 Profile | OfferGeneration | 结构化 Offer |
| 多 Offer → 方案 | 所有响应 | CenterCoordinator | 综合方案 |
| 缺口 → 子需求 | 方案的不完整处 | GapRecursion | 独立子需求 |

**一个操作，反复应用，在不同尺度上产生不同的结构。**

---

## 关键哲学区分：完备性 ≠ 完全性

创始人提出的核心区分：

- **完全性（Totality）**：我把世界所有信息 copy 了一份装在自己身上。我是世界的一个子集/副本。
- **完备性（Completeness）**：我不是世界的一个子集——我**就是**世界的一部分。世界所有的模式（pattern）我都**有通道去触达**，但我不是把它们都"装进来了"。

这就像全息底片（hologram）——每一块碎片都包含完整的图像，只是分辨率和视角不同。

**工程含义**：我们不需要在系统中"表示"一个人的全部。我们只需要做好"投影"的工作。投影越多、越持续更新，图像越清晰——但永远是投影，不是原件。

---

## "自"的工程表示：理解C

经过讨论，确立了"自"的工程定位：

**"自"不在系统中直接表示。"自"是那个人本身——在系统之外。我们的系统中只有"我"（投影）。**

```
┌─────────────────────────────────────────┐
│  系统之外：人的真实存在（"自"）            │
│  · 活的、完备的、与世界连通的               │
│  · 不可能被完整数字化                      │
│  · 这个预设很重要：人/世界不能完全被数字化   │
└──────────────────┬──────────────────────┘
                   │
                   │ 数据源（SecondMe、交互、行为...）
                   │ 是"自"的影子，不是"自"本身
                   ▼
┌─────────────────────────────────────────┐
│  系统之内：Profile Data Store             │
│  · 是"自"能被数字化的那部分（数据影子）     │
│  · 越丰富 → 投影越精准，但永远不是"自"      │
│  · "连通性"比"数据量"更重要                │
│    （持续更新的少量数据 > 过时的大量数据）   │
└──────────────────┬──────────────────────┘
                   │
                   │ 投影（不同透镜）
                   ▼
┌─────────────────────────────────────────┐
│  网络中的存在：多个"我"                    │
│  · Edge Agent 超向量（通才投影，全维度）    │
│  · Service Agent / 面具（专才投影，聚焦）   │
│  · 每个"我"都是同一份数据的不同聚焦         │
│  · HDC 超向量是"投影"而非"画像"            │
│    （"画像"暗示完全性，"投影"暗示完备性）    │
└─────────────────────────────────────────┘
```

关键认知：
- Profile 数据本身以两种投影形式参与网络：
  - **HDC 超向量**（有损、广播到全网、用于共振检测）
  - **文本形式**（完整、只在生成 Offer 时本地使用）
- 不是"隐藏"数据，是同一份数据根据不同目的用不同的投影
- 这恰好就是"投影"基本操作的又一个体现

---

## 轨道模型：不是固定层数，而是涌现的

### 核心结论

不应该预设固定层数（外壳/中壳/内壳）。正确的模型是：

**"自" + 多个平行的"我"，按需生长。层数是涌现的，不是设计的。**

```
[自] (核心数据，系统之外)
  │
  │  数据影子
  ▼
[Profile Data Store]
  │
  ├── 我₁：Edge Agent（通才，bundle 了所有维度）── 永远存在
  ├── 我₂：面具 A / Service Agent A（聚焦某个领域）── 按需生长
  ├── 我₃：面具 B / Service Agent B（聚焦另一个领域）── 按需生长
  └── ...
```

所有的"我"是平行的，只是聚焦程度不同。聚焦程度是连续的，不是离散的层次。

### 信号路由：Edge Agent 是门卫，不是层次

```
信号进入
    ↓
Edge Agent 共振检测（全维度，能捕捉意外关联）
    ↓
不共振？→ 丢弃
共振？→ 检查 Service Agents：
    ├── 命中某个 Service Agent + 无意外成分 → Service Agent 处理（快）
    └── 有意外成分 或 没命中任何 → Edge Agent 处理（慢，保留涌现）
```

### 意外度（Surprise）检测

```python
edge_resonance = similarity(H_signal, H_edge_agent)
best_service = max(similarity(H_signal, H_service_i) for each service_i)
surprise = edge_resonance - best_service

if surprise < ε:
    route_to_service_agent()   # 标准需求，快速处理
else:
    route_to_edge_agent()      # 有意外成分，保留涌现
```

`surprise` = Edge Agent 全维度共振 - 最佳 Service Agent 窄维度共振。
如果差异大 → 说明信号激活了跨域干涉 → 这正是发现未知关联的时候。

### 递归分裂

同一个规则递归应用：当 Service Agent 自身经验积累导致信噪比下降 → 可以进一步分裂为子 Service Agent。分形结构。

---

## Service Agent 不会杀死涌现

核心论证：

1. **广播是全网的。** 标准需求命中市场（Service Agents），但信号同时也触达了所有 Edge Agents。
2. **Edge Agent 永远是第一接触面。** 意外关联在 Edge Agent 的全维度空间中被捕捉。
3. **surprise 值自动路由：** 标准需求 → 快速处理；有意外成分 → 保留涌现。
4. **用户可配置偏好：** "只要快" / "要惊喜" / "两者都要"。

```
需求广播
    ├── 路径 A：命中"前端开发市场"的 Service Agents → 标准化响应（快、精准）
    └── 路径 B：同时触达所有 Edge Agents → 某个意外 Agent 共振 → 涌现性响应
两条路径同时存在，不互斥。Center 聚合时两边都看得到。
```

---

## 手动面具 = Service Agent 的播种

手动面具和自动沉淀的 Service Agent 本质上是同一个东西：**"自"的数据通过特定透镜的投影。**

| | 手动面具 | Service Agent |
|--|---------|--------------|
| 创建方式 | 用户主动为某个场景创建 | 系统从经验中自动沉淀 |
| 透镜来源 | 场景 Template 定义 | 交互数据中的聚类 |
| 聚焦方式 | 场景告诉我"哪些维度重要" | 经验告诉我"哪些维度被反复激活" |
| 时机 | 加入场景时（前置） | 参与 N 次协商后（后置） |

**两种方式可以融合：**

```
手动创建面具（播种）
    ↓
参与该领域的协商 → 经验积累 → 面具画像自然演化（生长）
    ↓
面具从"场景模板的标准投影" 变成 "个性化的领域画像"
    ↓
手动面具 ≈ 成熟的 Service Agent
```

### 为产品/平台创建面具

当一个产品（如招聘平台）接入通爻网络，用户可以为它创建专门的面具：

```
[Profile Data] × 招聘场景透镜 → "招聘面具" Agent
[Profile Data] × 黑客松场景透镜 → "黑客松面具" Agent
[Profile Data] × 咨询场景透镜 → "咨询面具" Agent
```

每个面具 = 同一份数据 × 不同的场景透镜。透镜由场景定义（Template）。

连接到现有架构：Template Adapter（Section 6.5.6）就是"场景透镜"的工程实现。

---

## 市场是涌现的，不是设计的

```
T0（初期）：只有 Edge Agents，所有需求走响应范式
T1（积累）：某领域参与多 → Service Agents 沉淀
T2（涌现）：足够多同领域 Service Agents → HDC 空间形成密集聚类 → "市场"出现
T3（细分）：市场内部进一步分化 → 子市场 → 分形递归
```

**搜索范式不是响应范式的对立面——搜索范式是响应范式在高频场景下的自然涌现。**

不需要设计"市场系统"和"开放系统"两套东西。只需要：
1. 投影操作（一个"自"投射出多个"我"）
2. 广播 + 共振（全网触达，端侧判断）
3. 沉淀规则（重复的模式结晶为 Service Agent）

三个规则，万物生长。

---

## V1 渐进路径

| 版本 | 面具/Service Agent | 机制 |
|------|-------------------|------|
| V1 | 一人一个 Edge Agent | 数据结构预留 `parent_id` 和 `agent_type` |
| V1+ | 手动面具（用户为场景创建） | 同一份 Profile × 场景 Template → 多个 Agent |
| V2 | 半自动提示 | 系统检测经验聚类 → 提示用户 → 确认后创建 |
| V3 | 全自动沉淀 | 系统根据 HDC 聚类自动分裂，用户可调整 |

为什么要渐进？因为"面具"涉及身份——**一个人以什么身份出现在网络中，应该是他自己的选择。** 这是对"自"的尊重。

---

## 本质与实现的分形对照表

| 层面 | 本质（稳定） | 实现（可变） |
|------|------------|------------|
| 人 | "自"（完备的场连接） | "我"（多个面具/投影） |
| Agent | Profile 数据 | HDC 超向量画像 |
| Service Agent | 同一个人的能力本质 | 不同场景的具体 Offer |
| Skill | 接口定义 | Prompt 实现 |
| 协议 | 事件语义 | 传输方式（WebSocket/P2P） |
| 网络 | 响应范式 | 涌现出的搜索/中心化优化 |

每一层都是同一个模式：本质是稳定的、可递归的、完备的；实现是可变的、可进化的、适应性的。

---

## 待写入架构文档的内容（摘要）

1. Section 0：补充设计原则 —— "投影是基本操作"、"完备性 ≠ 完全性"
2. Section 1 或新 Section：补充"自-我"工程映射、轨道模型（涌现的，非固定层数）
3. Service Agent 数据结构和沉淀机制：V2 规划，V1 预留接口
4. 意外度（surprise）路由逻辑
5. 手动面具 = Service Agent 播种 = 场景 Template 的自然延伸
6. 市场涌现的描述（标准需求 + 开放网络共存）

---

*最后更新：2026-02-07*
