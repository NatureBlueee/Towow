# A2 -- 分布式共振网络学术调研

> 创建日期：2026-02-07
> 任务类型：协议核心 × 学术调研
> 优先级：Tier 1（#2）
> PRD 状态：已细化
> 关联任务：A1（HDC 编码验证，上游——理解编码格式）、H4（最小验证实验，下游可能使用调研推荐的方案）

---

## 这个任务在项目中的位置

通爻（ToWow）是一个 AI Agent 协作网络。它的核心理念是"响应范式"——用户发出需求信号，网络中相关的 Agent 自行判断"这跟我有没有关系"，然后主动响应。

V1 版本的信号传播方式很简单：一个中心节点直接把信号广播给所有 Agent。这在 1000 个 Agent 的规模下没问题，但如果未来网络扩展到 10 万、100 万个 Agent，中心广播就会成为瓶颈。

**A2 就是为未来准备的知识储备**——系统性地调研学术界已有的分布式相似度搜索和信息传播方案，评估哪些方向最适合通爻的"共振检测"场景。这份综述不管通爻未来选哪条技术路径都有价值。

```
[V1: 中心广播（当前）] ─────→ [A2: 调研分布式方案（你在这里）] → [V2: 分布式传播实现]
                                      ↑
                              [A1: HDC 编码验证]
```

---

## 为什么做这件事

通爻网络的 V1 版本用中心化广播来传播需求签名（见架构设计 Section 6.3.7）：一个中心节点直接把消息发给所有 1000 个 Agent，每个 Agent 在本地做共振检测。这在千级规模下完全够用（全网共振检测 < 0.1ms），但我们知道它不是终态。

当网络增长到万级、十万级，中心化广播会成为瓶颈和单点故障。我们需要一种**分布式的方式让信号找到与它共振的节点**——不经过任何中心，不需要全网广播，但又不能漏掉那些"意外相关"的节点。

这不是一个工程任务，而是一个**知识储备任务**。学术界在分布式相似度搜索、P2P 信息传播、去中心化向量检索等领域已经有大量研究。我们需要有人系统梳理这些工作，评估哪些方向最可能适用于通爻的共振检测场景。

**为什么现在值得做**：论文不会因为我们的架构变化而作废。这份综述无论通爻未来走哪条技术路径，都是有价值的参考。架构韧性极高。

## 你要回答什么问题

**核心问题**：在一个由数万到数十万节点组成的分布式网络中，如何让一个"需求信号"高效地找到与它语义相似的节点，同时保留发现"意外关联"的能力？

具体来说：

1. **现有方案全景**：分布式环境下的语义相似度搜索/最近邻搜索，学术界目前有哪些主要方向？各自的核心思路是什么？
2. **分布式 ANN 的现状**：近似最近邻搜索（ANN）从单机扩展到分布式场景时，主要面临哪些挑战？现有方案（如 Faiss 分布式版、Milvus、Weaviate 的分布式架构）如何解决这些问题？它们的 trade-off 是什么？
3. **Gossip 协议与语义传播**：Gossip 协议能否被改造为"语义感知"的信息传播机制（即：只向"可能感兴趣"的邻居转发）？已有哪些相关工作？复杂度和覆盖率如何？
4. **DHT 与语义检索的结合**：传统 DHT（如 Kademlia、Chord）是基于精确键的查找，能否扩展为基于语义相似度的查找？已有哪些方案（如 LSH-based DHT、语义覆盖网络）？
5. **去中心化向量数据库**：是否存在完全去中心化（无中心协调者）的向量数据库方案？如果不存在，最接近的是什么？
6. **意外关联的保留**：上述所有方案中，哪些能保留"发现意外关联"的能力（即：不仅找到最相似的 top-k，还能发现语义空间中的"干涉模式"）？哪些会因为过度优化精确度而牺牲这种能力？

## 我们提供什么

### 概念着陆（通爻术语 → A2 语境中的含义）

| 通爻术语 | 在 A2 中意味着 |
|---------|---------------|
| 共振（Resonance） | 分布式环境下的语义相似度检测——节点 A 的信号到达节点 B 后，B 在本地判断"这跟我有没有关系"。你的调研就是在找：如何在去中心化网络中高效完成这个判断 |
| 签名广播 | 信号（HDC 超向量）在网络中的传播。V1 是中心广播（O(N)），未来需要更智能的传播（O(log N)）。你在调研传播方案 |
| 端侧计算 | 共振判断发生在每个节点本地，不是中心服务器计算后分发结果。这意味着分布式方案不能依赖"收集所有向量到一处" |
| 意外关联 | 通爻的核心价值之一——不仅找到"最相似"的节点，还能发现"你不知道存在"的关联。任何分布式方案都不能为了效率牺牲这一点 |
| 超向量（Hypervector） | 10,000 维二进制向量，相似度用汉明距离计算。与浮点向量余弦相似度不同，这影响分布式索引方案的选择 |

### 设计原则（与 A2 的关系）

| # | 原则 | 与 A2 的关系 |
|---|------|-------------|
| 0.3 | 复杂度目标 O(N+M) | 分布式方案的计算和通信复杂度必须满足或接近 O(N+M)，不能是 O(N²) |
| 0.4 | 计算分布在端侧 | 方案不能依赖中心索引服务器；每个节点需要有自主的共振检测能力 |
| 0.7 | 简单规则涌现复杂行为 | 理想的分布式方案应该是"每个节点执行简单规则，全局涌现出高效传播" |
| 0.2 | 本质与实现分离 | 共振检测的接口（输入信号→输出是否共振）是本质，具体用 Gossip 还是 DHT 是实现 |

### 设计文档

| 文档 | 重点阅读 | 你能从中获得什么 |
|------|---------|----------------|
| `docs/ARCHITECTURE_DESIGN.md` Section 6.3 | 签名共振机制 | 理解共振检测的完整流程和数据格式 |
| `docs/ARCHITECTURE_DESIGN.md` Section 6.3.2 | HDC 超维计算 | 理解二进制超向量和汉明距离 |
| `docs/ARCHITECTURE_DESIGN.md` Section 6.3.7 | V1 简单广播 + 未来语义 Gossip | 理解当前方案和已有的方向性思考 |
| `docs/ARCHITECTURE_DESIGN.md` Section 0 | 设计原则 | 理解复杂度和端侧计算的硬约束 |

### 已有的方向线索

架构设计中已初步提到的方向（可以作为调研起点，但不限于此）：

- **语义 Gossip**：每个节点只向 3 个随机邻居传播，O(log N) 轮次覆盖全网，转发前用 Bloom Filter 检查邻居画像
- **参考论文**：
  - GEACL: Gossip-Enhanced Agentic Coordination Layer (arXiv:2512.03285)
  - Revisiting Gossip Protocols for Multi-Agent Systems (arXiv:2508.01531)
- **技术路径 B（共享向量空间 + ANN）** 和 **路径 C（分布式共振网络）** 在 Arch Skill 中有简述

### 通爻的特殊约束（区别于一般的分布式搜索）

做调研时请留意以下约束，它们使通爻的需求与标准的分布式搜索/推荐场景不同：

| 约束 | 说明 |
|------|------|
| **端侧计算** | 共振检测发生在每个节点本地，不是中心化计算后分发结果 |
| **二进制超向量** | 相似度用 10,000 维二进制向量的 Hamming 距离计算，不是浮点向量的余弦相似度 |
| **意外关联** | 系统的核心价值之一是发现"你不知道存在"的关联，过度优化精确匹配会损害这一点 |
| **O(N+M) 目标** | 理想情况下，总计算量应与节点数 N 和消息数 M 成线性关系，不是 N x M |
| **异构节点** | 未来节点可能运行在不同设备上（服务器、手机、边缘设备），算力差异大 |

## 子任务分解

### A2.1 定义调研范围与分类框架

**描述**：确定调研覆盖的领域边界和文献分类方式。建议覆盖至少以下几个方向：分布式 ANN、Gossip-based 信息传播、DHT-based 语义搜索、P2P 覆盖网络、分布式向量数据库。可以根据初步文献扫描调整分类。

**依赖**：无（可最先开始）

**交付物**：调研范围说明（1 页），包含：覆盖的研究方向、每个方向的关键词列表、预设的分类维度（如：中心化程度、查询类型、数据结构、复杂度）

### A2.2 文献检索与筛选

**描述**：基于 A2.1 的范围，系统检索相关论文。目标 30-50 篇核心论文（survey 论文可以帮助快速定位）。筛选标准：近 5 年优先（2021-2026），顶会/顶刊优先（但不排除重要的早期奠基论文），与通爻场景的相关性。

**依赖**：A2.1

**交付物**：论文清单（BibTeX 或表格），每篇含：标题、年份、venue、一句话摘要、与通爻的相关性标注（高/中/低）

### A2.3 按方案分类整理

**描述**：将筛选出的论文按技术方案分类整理，每类给出核心思路、代表性工作、优缺点。建议分类（可调整）：

- **DHT-based 方案**：基于分布式哈希表的语义搜索扩展
- **Gossip-based 方案**：基于 Gossip 协议的语义感知信息传播
- **分布式索引方案**：将 ANN 索引（如 HNSW、IVF）分布式化
- **覆盖网络方案**：构建语义感知的 P2P 覆盖网络
- **混合方案**：结合多种机制的方案
- **其他**：不属于以上类别的新颖方案

**依赖**：A2.2

**交付物**：分类整理文档（每类 500-1000 字），含核心思路图示、代表论文、优缺点对比表

### A2.4 与通爻共振检测的适配性分析

**描述**：这是本调研最有价值的部分。将 A2.3 中的每类方案放到通爻的具体场景下评估。评估维度建议：

- 是否兼容二进制超向量 + Hamming 距离？
- 是否支持端侧计算？
- 能否保留"意外关联"发现能力？
- 复杂度是否满足 O(N+M) 或接近？
- 冷启动和节点动态加入/退出的处理？
- 实现复杂度和工程成熟度？

**依赖**：A2.3 + 对通爻架构的理解

**交付物**：适配性分析表（每个方案 x 每个评估维度），含详细的 trade-off 讨论

### A2.5 撰写综述报告与推荐方向

**描述**：综合以上内容，撰写完整的学术综述报告。报告末尾给出 2-3 个推荐方向（不是"最终答案"，而是"最值得进一步探索的方向"），并说明推荐理由和后续验证所需的工作。

**依赖**：A2.1 - A2.4

**交付物**：综述报告（8000-15000 字），结构为：引言、背景、分类综述、适配性分析、推荐方向、参考文献

## 做完了是什么样

### 产出格式

- **主报告**：Markdown 格式，8000-15000 字
- **论文清单**：BibTeX 文件或 Markdown 表格
- **适配性分析表**：Markdown 表格

### 质量标准

**"做完了"的标准**：
- 覆盖了至少 4 个不同方向的方案
- 引用了至少 30 篇论文
- 每个方向有清晰的核心思路描述和 trade-off 分析
- 适配性分析覆盖了所有主要评估维度
- 给出了至少 2 个推荐方向并说明理由

**"做得好"的标准**（超出基本要求）：
- 发现了我们没想到的方向或方案
- 适配性分析中指出了通爻当前设计的潜在问题
- 推荐方向有具体的后续验证实验建议
- 文献覆盖系统全面，分类清晰有洞察

**"做得出色"的标准**（产生额外价值）：
- 提出了一种新颖的"语义 Gossip"变体，专门为二进制超向量 + 汉明距离设计
- 综述本身可作为独立学术贡献（survey paper 级别的质量）
- 发现了分布式传播中保留"意外关联"的理论或实践框架
- 给出了 V2 分布式方案的完整 roadmap（从调研到原型验证的路径）

## 你必须遵守的

1. **学术严谨性**：所有论述需有文献支撑，不能凭感觉推断。引用格式规范。
2. **公平评估**：每个方案都要分析优缺点，不能为了推荐某个方案而刻意贬低其他方案。
3. **区分事实和观点**：文献中的结论是事实，你的判断是观点。两者要明确区分。
4. **保留原始论文指针**：读者应该能通过你的综述找到原始论文深入阅读。
5. **考虑通爻的特殊性**：不是泛泛的分布式搜索综述，而是聚焦于通爻共振检测场景的适配性分析。通爻的核心特殊性包括：二进制超向量、端侧计算、意外关联发现。

## 你可以自己决定的

1. **分类方式**：A2.1 中的分类建议仅供参考，你可以根据文献实际情况调整分类维度和类别。
2. **论文筛选标准**：30-50 篇是参考范围，如果某个方向特别重要可以多收，某个方向确实贫瘠可以少收。
3. **深度分配**：如果某个方向与通爻特别相关，可以花更多篇幅深入；不太相关的方向简要概述即可。
4. **额外发现**：如果在调研中发现了通爻设计的潜在问题或新的可能性，非常欢迎在报告中提出。
5. **工具选择**：可以使用任何文献管理工具（Zotero、Mendeley、Google Scholar 等）。
6. **写作语言**：中文或英文均可，优先中文（与团队沟通方便），但技术术语保留英文。

## 对接方式

- **产出提交到**：`raphael/research/A2_distributed_resonance_survey/`
  - `report.md` -- 主报告
  - `references.bib` 或 `references.md` -- 论文清单
  - `analysis_table.md` -- 适配性分析表（也可内嵌在主报告中）
- **建议节奏**：
  - 第 1 周：完成 A2.1 + A2.2（范围定义 + 文献检索）
  - 第 2-3 周：完成 A2.3 + A2.4（分类整理 + 适配性分析）
  - 第 4 周：完成 A2.5（综述报告）
  - 总周期：3-4 周
- **有问题找谁**：创始人或通过 `.claude/skills/arch/SKILL.md` 获取架构上下文
- **后续依赖**：本综述的推荐方向将输入到 V2 传播机制的技术选型决策中。但不阻塞 V1 开发（V1 使用中心化广播）

---

*本 PRD 由 Task Arch Skill 生成。任务定义在问题层，不预设方案。产出价值 = 高内在价值 x 高架构韧性。*
